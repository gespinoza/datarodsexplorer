{% extends "data_rods_explorer/app_base_dre.html" %}
{% load tethys_gizmos %}

{% load staticfiles %}

{% block title %}- {{ tethys_app.name }}{% endblock %}

{% block styles %}
  {{ block.super }}
  <link href="{% static 'data_rods_explorer/css/main.css' %}" rel="stylesheet"/>
{% endblock %}

{% block app_icon %}
  {# The path you provided in your app.py is accessible through the tethys_app.icon context variable #}
  <img src="{% static tethys_app.icon %}">
{% endblock %}

{% block app_navigation_items %}
  <!--js scripts-->
  <script src="{% static 'data_rods_explorer/js/load_pages.js' %}" type="text/javascript"></script>
  <script src="{% static 'data_rods_explorer/js/on_change.js' %}" type="text/javascript"></script>
  <script src="{% static 'data_rods_explorer/js/main.js' %}" type="text/javascript"></script>
  <script src="{% static 'data_rods_explorer/js/custom_plots.js' %}" type="text/javascript"></script>
  <script src="{% static 'data_rods_explorer/js/model_objects.js' %}" type="text/javascript"></script>

  <li class="title">Product-Model</li>
  <div style="padding-left:20px;padding-bottom:10px;">
  	{% gizmo select_input select_model %}

  	<li>Select Variable</li>
  	<select id="variable" name='var_case' class="form-control" style="width:100%;" onchange="oc_variable();"></select>
  	<script>
  	  load_variable_options('model', 'variable');
  	</script>
  	<li class="separator"></li>
  	<li>Select Map date & time</li>
  	{% gizmo date_picker select_date %}
  	{% gizmo select_input select_hour%}
 
  <form name="parametersForm" onsubmit='load_map();' action='' method='post'>
    {% csrf_token %} 
    <input name="lonW" id="lonW" value=-107 hidden>
    <input name="latS" id="latS" value=24 hidden>
    <input name="lonE" id="lonE" value=-95 hidden>
    <input name="latN" id="latN" value=30 hidden>
    <input name="zoom" id="zoom" value=4.25 hidden>
    <input name="centerX" id="centerX" value=-96.5 hidden>
    <input name="centerY" id="centerY" value=38.5 hidden>
    <input name="retrieveMap" id="retrieveMap" value="yes" hidden>
    <input name="loadMap" id="loadMap" value="no" hidden>
    <input name="prevPlot" id="prevPlot" value="no" hidden>
    <input name="pointLonLat" id="pointLonLat" value=-9999 hidden>
    <button name="plot_btn" type="submit" class="btn btn-default">Display map</button>
    <!--<input name="plot_btn" type="submit" value="Display Map" class="btn btn-default">-->
  </form>
  </div>

  {% if load_layer %}
  <script>
    document.getElementById('loadMap').value = '{{ load_layer }}';
  </script>
  {% endif %}

  <li class="nav-divider"></li>

  <li style="padding-top:0px;" class="title">Time series</li>

  <li class="active"><a href="javascript:void(0)" onclick="page_and_parameters_html('{% url 'data_rods_explorer:plot' %}', 'plot');">Plot one variable</a></li>

  <div style="padding-left:30px;padding-bottom:15px;">
	<li style="padding-top:15px;">Start date:</li>
	{% gizmo date_picker start_date %}
	<li>End date:</li>
	{% gizmo date_picker end_date %}
	<script>
	  load_default_plot();
	</script>
	{% gizmo button plot_button %}
  </div>

  <li><a href="javascript:void(0)" onclick="page_and_parameters_html('{% url 'data_rods_explorer:plot2' %}', 'plot2');">Compare two variables</a></li>

  <li><a style="padding-bottom:15px;" href="javascript:void(0)" onclick="page_and_parameters_html('{% url 'data_rods_explorer:years' %}', 'years');">Year-on-year changes</a></li>

{% endblock %}

{% block app_content %}
  <p>Click on the map</p>
  {% gizmo map_view map_view_options %}
  {% if timeseries_plot %}
    {% gizmo plot_view timeseries_plot %}
  {% endif %}
  
{% endblock %}

{% block app_actions %}
<!--<li><a>Contact:</br>Gonzalo E. Espinoza</br>gespinoza@utexas.edu</a></li>-->
{% endblock %}

{% block scripts %}
  {{ block.super }}
  <!--Loaded before:
  <script src="{% static 'data_rods_explorer/js/main.js' %}" type="text/javascript"></script>-->
  <script>
    window.onload = map_click_evt;
  </script>
{% endblock %}

